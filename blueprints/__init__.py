"""
================================================================================
STATAU 蓝图模块 (blueprints/)
================================================================================
说明：
    - 本目录包含所有 Flask 蓝图（Blueprint）
    - 每个蓝图负责一个独立的功能模块
    - 蓝图只处理 HTTP 请求/响应，业务逻辑委托给服务层

目录结构：
    blueprints/
    ├── __init__.py          # 本文件，蓝图注册入口
    ├── pages.py             # 页面路由蓝图（首页、分析页、帮助页等）
    ├── auth.py              # 用户认证蓝图（登录、注册、登出）
    └── analysis.py          # 数据分析蓝图（上传、分析、预览）

设计理念（解耦优于复用）：
    - 每个蓝图是独立的，不依赖其他蓝图
    - 蓝图之间不共享路由处理函数
    - 即使有相似逻辑，也保持各自独立实现
    - 这样添加新功能时，不需要理解其他模块的实现

使用方式：
    from blueprints import register_blueprints
    register_blueprints(app)
================================================================================
"""

from flask import Flask


def register_blueprints(app: Flask) -> None:
    """
    注册所有蓝图到 Flask 应用
    
    参数:
        app: Flask 应用实例
    
    说明:
        此函数应在 create_app() 工厂函数中调用
        蓝图的 URL 前缀在此处统一配置
    """
    # ------------------------------------------------------------------------
    # 导入蓝图
    # 注意：在函数内部导入，避免循环依赖
    # ------------------------------------------------------------------------
    from blueprints.pages import pages_bp
    from blueprints.auth import auth_bp
    from blueprints.analysis import analysis_bp
    from blueprints.admin import admin_bp
    
    # ------------------------------------------------------------------------
    # 注册页面路由蓝图
    # URL 前缀：无（根路径）
    # 包含：首页、分析页、数据库页、帮助页
    # ------------------------------------------------------------------------
    app.register_blueprint(pages_bp)
    print("[blueprints] 已注册: pages_bp (页面路由)")
    
    # ------------------------------------------------------------------------
    # 注册认证蓝图
    # URL 前缀：/api
    # 包含：登录、注册、登出、验证码
    # ------------------------------------------------------------------------
    app.register_blueprint(auth_bp, url_prefix='/api')
    print("[blueprints] 已注册: auth_bp (用户认证, 前缀: /api)")
    
    # ------------------------------------------------------------------------
    # 注册分析蓝图
    # URL 前缀：无（根路径）
    # 包含：文件上传、数据分析、数据预览、清空表格
    # ------------------------------------------------------------------------
    app.register_blueprint(analysis_bp)
    print("[blueprints] 已注册: analysis_bp (数据分析)")
    
    # ------------------------------------------------------------------------
    # 注册管理后台蓝图
    # URL 前缀：/admin
    # 包含：用户管理、系统设置
    # ------------------------------------------------------------------------
    app.register_blueprint(admin_bp)
    print("[blueprints] 已注册: admin_bp (管理后台, 前缀: /admin)")