{% extends "base.html" %}

{% block title %}帮助手册{% endblock %}

{% block styles %}
<style>
    /* ========== 全局样式 ========== */
    .help-page {
        background: var(--bg-primary);
        min-height: calc(100vh - 56px);
    }

    /* ========== Hero 区域 ========== */
    .help-hero {
        padding: 60px 0 80px;
        position: relative;
        overflow: hidden;
    }

    .help-hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image:
            linear-gradient(rgba(0, 212, 255, 0.05) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 212, 255, 0.05) 1px, transparent 1px);
        background-size: 40px 40px;
        opacity: 0.5;
    }

    .help-hero-content {
        position: relative;
        z-index: 1;
        text-align: center;
        color: var(--text-primary);
    }

    .help-hero-title {
        font-size: 3rem;
        font-weight: 800;
        margin-bottom: 15px;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .help-hero-subtitle {
        font-size: 1.3rem;
        color: var(--text-secondary);
        margin-bottom: 30px;
    }

    /* ========== 导航卡片 ========== */
    .nav-cards-section {
        background: var(--bg-secondary);
        padding: 60px 0;
        position: relative;
        margin-top: -40px;
    }

    .nav-card {
        background: var(--bg-tertiary);
        border-radius: 15px;
        padding: 30px;
        height: 100%;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        transition: all 0.3s ease;
        border: 1px solid var(--border-color);
        cursor: pointer;
        text-decoration: none;
        display: block;
        color: inherit;
    }

    .nav-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 15px 40px rgba(0, 212, 255, 0.2);
        border-color: var(--border-accent);
        text-decoration: none;
        color: inherit;
    }

    .nav-card-icon {
        width: 70px;
        height: 70px;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        margin-bottom: 20px;
        transition: all 0.3s ease;
        border: 2px solid var(--accent-primary);
        background: transparent;
        color: var(--accent-primary);
    }

    .nav-card:hover .nav-card-icon {
        transform: scale(1.1) rotate(5deg);
        box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
    }
    .icon-faq { background: transparent; border: 2px solid var(--accent-primary); color: var(--accent-primary); }

    .nav-card-title {
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 10px;
    }

    .nav-card-desc {
        color: var(--text-secondary);
        font-size: 0.95rem;
        line-height: 1.6;
    }

    /* ========== 内容区域 ========== */
    .content-section {
        background: var(--bg-primary);
        padding: 80px 0;
    }

    .section-header {
        text-align: center;
        margin-bottom: 50px;
    }

    .section-title {
        font-size: 2.2rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 15px;
    }

    .section-subtitle {
        color: var(--text-secondary);
        font-size: 1.1rem;
    }

    /* ========== 侧边导航 ========== */
    .sidebar-nav {
        position: sticky;
        top: 80px;
    }

    .sidebar-nav .list-group-item {
        border: none;
        border-left: 3px solid transparent;
        padding: 12px 20px;
        color: var(--text-secondary);
        transition: all 0.3s ease;
        background: transparent;
    }

    .sidebar-nav .list-group-item:hover {
        background: var(--bg-tertiary);
        border-left-color: var(--accent-primary);
        color: var(--accent-primary);
    }

    .sidebar-nav .list-group-item.active {
        background: linear-gradient(90deg, rgba(0, 212, 255, 0.1) 0%, transparent 100%);
        border-left-color: var(--accent-primary);
        color: var(--accent-primary);
        font-weight: 600;
    }

    /* ========== 内容卡片 ========== */
    .content-card {
        background: var(--bg-secondary);
        border-radius: 15px;
        padding: 40px;
        margin-bottom: 30px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        border: 1px solid var(--border-color);
    }

    .content-card h3 {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 3px solid var(--accent-primary);
    }

    .content-card h4 {
        font-size: 1.4rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-top: 30px;
        margin-bottom: 15px;
    }
    
    .content-card h5 {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--text-secondary);
        margin-top: 20px;
        margin-bottom: 10px;
    }

    .content-card p {
        color: var(--text-secondary);
        line-height: 1.8;
        margin-bottom: 15px;
    }

    .content-card ul, .content-card ol {
        color: var(--text-secondary);
        line-height: 1.8;
        margin-bottom: 20px;
    }

    .content-card li {
        margin-bottom: 8px;
    }

    /* ========== 特色框 ========== */
    .feature-box {
        background: var(--gradient-primary);
        color: white;
        padding: 25px;
        border-radius: 10px;
        margin: 25px 0;
    }

    .feature-box h5 {
        color: white;
        font-weight: 600;
        margin-bottom: 10px;
    }

    .feature-box p {
        color: rgba(255,255,255,0.95);
        margin-bottom: 0;
    }
    
    /* ========== 提示框 ========== */
    .tip-box {
        background: #e7f3ff;
        border-left: 4px solid #2196F3;
        padding: 20px;
        border-radius: 5px;
        margin: 20px 0;
    }
    
    .tip-box.warning {
        background: #fff3cd;
        border-left-color: #ffc107;
    }
    
    .tip-box.success {
        background: #d4edda;
        border-left-color: #28a745;
    }
    
    .tip-box.danger {
        background: #f8d7da;
        border-left-color: #dc3545;
    }
    
    .tip-box strong {
        display: block;
        margin-bottom: 8px;
        font-size: 1.05rem;
    }
    
    /* ========== 代码块 ========== */
    .code-block {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        overflow-x: auto;
        font-family: 'Courier New', monospace;
        font-size: 0.9rem;
        line-height: 1.6;
    }
    
    code {
        background: #f4f4f4;
        padding: 2px 6px;
        border-radius: 3px;
        color: #e83e8c;
        font-family: 'Courier New', monospace;
        font-size: 0.9em;
    }
    
    /* ========== 表格样式 ========== */
    .help-table {
        width: 100%;
        margin: 20px 0;
        border-collapse: collapse;
    }
    
    .help-table th {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 12px;
        text-align: left;
        font-weight: 600;
    }
    
    .help-table td {
        padding: 12px;
        border-bottom: 1px solid #e9ecef;
    }
    
    .help-table tr:hover {
        background: #f8f9fa;
    }
    
    /* ========== 步骤指示器 ========== */
    .step-indicator {
        display: flex;
        align-items: center;
        margin: 30px 0;
    }
    
    .step-number {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: 700;
        flex-shrink: 0;
        margin-right: 20px;
    }
    
    .step-content h5 {
        margin: 0 0 8px 0;
        color: #2c3e50;
        font-weight: 600;
    }
    
    .step-content p {
        margin: 0;
        color: #6c757d;
    }
    
    /* ========== 功能网格 ========== */
    .feature-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 30px 0;
    }
    
    .feature-item {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        border-left: 4px solid #667eea;
        transition: all 0.3s ease;
    }
    
    .feature-item:hover {
        background: white;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transform: translateX(5px);
    }
    
    .feature-item h6 {
        color: #2c3e50;
        font-weight: 600;
        margin-bottom: 8px;
    }
    
    .feature-item p {
        color: #6c757d;
        font-size: 0.9rem;
        margin: 0;
    }
    
    /* ========== 响应式 ========== */
    @media (max-width: 768px) {
        .help-hero-title {
            font-size: 2rem;
        }
        
        .help-hero-subtitle {
            font-size: 1.1rem;
        }
        
        .content-card {
            padding: 25px;
        }
        
        .sidebar-nav {
            position: static;
            margin-bottom: 30px;
        }
    }
    
    /* ========== 动画 ========== */
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .fade-in-up {
        animation: fadeInUp 0.6s ease-out;
    }
</style>
{% endblock %}

{% block content %}
<div class="help-page">
    <!-- Hero 区域 -->
    <section class="help-hero">
        <div class="container">
            <div class="help-hero-content">
                <h1 class="help-hero-title">
                    <i class="fa-light fa-book me-3"></i>STATAU 使用手册
                </h1>
                <p class="help-hero-subtitle">
                    从零开始，快速掌握云端计量经济学分析平台的所有功能
                </p>
            </div>
        </div>
    </section>
    
    <!-- 快速导航卡片 -->
    <section class="nav-cards-section">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-4">
                    <a href="#quick-start" class="nav-card">
                        <div class="nav-card-icon icon-start">
                            <i class="fa-light fa-rocket"></i>
                        </div>
                        <h4 class="nav-card-title">快速开始</h4>
                        <p class="nav-card-desc">了解如何上传数据、配置变量、运行第一个分析</p>
                    </a>
                </div>
                <div class="col-md-4">
                    <a href="#analysis-methods" class="nav-card">
                        <div class="nav-card-icon icon-analysis">
                            <i class="fa-light fa-chart-line"></i>
                        </div>
                        <h4 class="nav-card-title">分析方法</h4>
                        <p class="nav-card-desc">掌握描述统计、回归模型、模型检验等核心功能</p>
                    </a>
                </div>
                <div class="col-md-4">
                    <a href="#export-guide" class="nav-card">
                        <div class="nav-card-icon icon-export">
                            <i class="fa-light fa-download"></i>
                        </div>
                        <h4 class="nav-card-title">导出结果</h4>
                        <p class="nav-card-desc">学习如何导出Word、Excel等多种格式的分析结果</p>
                    </a>
                </div>
                <div class="col-md-4">
                    <a href="#advanced-features" class="nav-card">
                        <div class="nav-card-icon icon-advanced">
                            <i class="fa-light fa-gear"></i>
                        </div>
                        <h4 class="nav-card-title">高级功能</h4>
                        <p class="nav-card-desc">探索面板数据、标准误选项、模型检验等高级特性</p>
                    </a>
                </div>
                <div class="col-md-4">
                    <a href="#faq" class="nav-card">
                        <div class="nav-card-icon icon-faq">
                            <i class="fa-light fa-circle-question"></i>
                        </div>
                        <h4 class="nav-card-title">常见问题</h4>
                        <p class="nav-card-desc">查找常见问题的解决方案和使用技巧</p>
                    </a>
                </div>
            </div>
        </div>
    </section>
    
    <!-- 详细内容区域 -->
    <section class="content-section">
        <div class="container">
            <div class="row">
                <!-- 侧边导航 -->
                <div class="col-lg-3">
                    <div class="sidebar-nav">
                        <div class="list-group">
                            <a href="#quick-start" class="list-group-item active">快速开始</a>
                            <a href="#data-preparation" class="list-group-item">数据准备</a>
                            <a href="#analysis-methods" class="list-group-item">分析方法</a>
                            <a href="#export-guide" class="list-group-item">导出结果</a>
                            <a href="#advanced-features" class="list-group-item">高级功能</a>
                            <a href="#faq" class="list-group-item">常见问题</a>
                        </div>
                    </div>
                </div>
                
                <!-- 主要内容 -->
                <div class="col-lg-9">
                    <!-- 快速开始 -->
                    <div id="quick-start" class="content-card fade-in-up">
                        <h3><i class="fa-light fa-rocket me-2"></i>快速开始</h3>
                        
                        <p>欢迎使用 STATAU！本节将引导您完成第一次数据分析的全过程。</p>
                        
                        <h4>四步完成分析</h4>
                        
                        <div class="step-indicator">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h5>注册并登录</h5>
                                <p>点击导航栏的"登录/注册"按钮，填写用户名、邮箱和密码完成注册</p>
                            </div>
                        </div>
                        
                        <div class="step-indicator">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h5>上传数据文件</h5>
                                <p>进入"数据分析"页面，点击文件上传按钮，选择您的数据文件（支持CSV、Excel、Stata DTA格式）</p>
                            </div>
                        </div>
                        
                        <div class="step-indicator">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h5>配置分析参数</h5>
                                <p>在左侧导航栏选择分析方法，在右侧面板选择变量并配置参数</p>
                            </div>
                        </div>
                        
                        <div class="step-indicator">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h5>查看并导出结果</h5>
                                <p>点击"开始分析"按钮，查看生成的学术标准表格，可导出为Word、Excel等格式</p>
                            </div>
                        </div>
                        
                        <div class="tip-box success">
                            <strong><i class="fa-light fa-lightbulb me-2"></i>小贴士</strong>
                            <p>首次使用建议从简单的描述性统计开始，熟悉界面操作后再尝试复杂的回归模型。</p>
                        </div>
                    </div>
                    
                    <!-- 数据准备 -->
                    <div id="data-preparation" class="content-card fade-in-up">
                        <h3><i class="fa-light fa-file-spreadsheet me-2"></i>数据准备</h3>
                        
                        <h4>支持的文件格式</h4>
                        <table class="help-table">
                            <thead>
                                <tr>
                                    <th>格式</th>
                                    <th>扩展名</th>
                                    <th>说明</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>CSV</td>
                                    <td><code>.csv</code></td>
                                    <td>逗号分隔值文件，最通用的格式</td>
                                </tr>
                                <tr>
                                    <td>Excel</td>
                                    <td><code>.xlsx</code>, <code>.xls</code></td>
                                    <td>Microsoft Excel 文件</td>
                                </tr>
                                <tr>
                                    <td>Stata</td>
                                    <td><code>.dta</code></td>
                                    <td>Stata 数据文件（建议使用Stata 14及以下版本）</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <h4>数据格式要求</h4>
                        <ul>
                            <li><strong>标准二维表格</strong>：数据必须是行列结构，每行代表一个观测，每列代表一个变量</li>
                            <li><strong>第一行为变量名</strong>：第一行必须包含变量名称，建议使用英文命名</li>
                            <li><strong>避免特殊字符</strong>：变量名和数据中尽量避免中文特殊字符，防止乱码</li>
                            <li><strong>缺失值处理</strong>：缺失值可以留空或使用NA、NaN等标记</li>
                            <li><strong>文件大小限制</strong>：单个文件最大50MB</li>
                        </ul>
                        
                        <h4>数据示例</h4>
                        <div class="code-block">
firm_id,year,revenue,profit,employees,region
1,2020,1000,100,50,East
1,2021,1200,150,55,East
2,2020,800,80,40,West
2,2021,900,90,42,West
                        </div>
                        
                        <div class="tip-box warning">
                            <strong><i class="fa-light fa-triangle-exclamation me-2"></i>注意事项</strong>
                            <p>1. 确保数据中没有合并单元格<br>
                            2. 日期格式建议使用数字（如2020、2021）<br>
                            3. 分类变量可以使用数字编码或文本标签</p>
                        </div>
                    </div>
                    
                    <!-- 分析方法 -->
                    <div id="analysis-methods" class="content-card fade-in-up">
                        <h3><i class="fa-light fa-chart-line me-2"></i>分析方法详解</h3>
                        
                        <h4>基础分析</h4>
                        
                        <div class="feature-grid">
                            <div class="feature-item">
                                <h6><i class="fa-light fa-chart-simple me-2"></i>描述性统计</h6>
                                <p>计算均值、标准差、最小值、最大值等基本统计量</p>
                            </div>
                            <div class="feature-item">
                                <h6><i class="fa-light fa-diagram-project me-2"></i>分组描述统计</h6>
                                <p>按分类变量分组展示描述性统计结果</p>
                            </div>
                            <div class="feature-item">
                                <h6><i class="fa-light fa-table me-2"></i>频数统计</h6>
                                <p>统计分类变量的频数、百分比和累计百分比</p>
                            </div>
                            <div class="feature-item">
                                <h6><i class="fa-light fa-link me-2"></i>相关性分析</h6>
                                <p>计算变量间的相关系数矩阵，带显著性检验</p>
                            </div>
                            <div class="feature-item">
                                <h6><i class="fa-light fa-triangle-exclamation me-2"></i>VIF检验</h6>
                                <p>检测多重共线性问题，计算方差膨胀因子</p>
                            </div>
                        </div>
                        
                        <h4>回归模型</h4>
                        
                        <h5>1. OLS 线性回归</h5>
                        <p>最基础的回归模型，适用于连续因变量的分析。</p>
                        <ul>
                            <li><strong>适用场景</strong>：因变量为连续变量，自变量可以是连续或分类变量</li>
                            <li><strong>标准误选项</strong>：支持普通标准误、稳健标准误、聚类标准误</li>
                            <li><strong>输出结果</strong>：系数、标准误/t值、显著性星号、R²、调整R²、F统计量</li>
                        </ul>
                        
                        <h5>2. 固定效应模型 (FE)</h5>
                        <p>控制个体固定效应和时间固定效应，适用于面板数据分析。</p>
                        <ul>
                            <li><strong>适用场景</strong>：面板数据，需要控制不随时间变化的个体特征</li>
                            <li><strong>必需参数</strong>：个体ID变量（entity）、时间变量（time）</li>
                            <li><strong>固定效应选项</strong>：可选择控制个体效应、时间效应或双向固定效应</li>
                        </ul>
                        
                        <h5>3. 随机效应模型 (RE)</h5>
                        <p>假设个体效应与自变量不相关，适用于大样本面板数据。</p>
                        <ul>
                            <li><strong>适用场景</strong>：面板数据，个体效应与自变量无关</li>
                            <li><strong>与FE的区别</strong>：RE假设更强但效率更高，需通过Hausman检验选择</li>
                        </ul>
                        
                        <h5>4. 混合效应模型 (Pooled OLS)</h5>
                        <p>不考虑面板结构，将所有观测视为独立样本。</p>
                        <ul>
                            <li><strong>适用场景</strong>：作为基准模型，与FE模型进行F检验比较</li>
                            <li><strong>标准误</strong>：建议使用聚类标准误纠正组内相关性</li>
                        </ul>
                        
                        <h5>5. Logit 模型</h5>
                        <p>因变量为二元变量（0/1）的非线性回归模型。</p>
                        <ul>
                            <li><strong>适用场景</strong>：因变量为二分类变量（如是否违约、是否购买）</li>
                            <li><strong>系数解释</strong>：系数表示对数几率的变化</li>
                        </ul>
                        
                        <h5>6. Probit 模型</h5>
                        <p>与Logit类似，但基于正态分布假设。</p>
                        <ul>
                            <li><strong>适用场景</strong>：与Logit相同，结果通常差异不大</li>
                            <li><strong>选择建议</strong>：Logit更常用，Probit在某些情况下理论基础更强</li>
                        </ul>
                        
                        <h4>模型检验</h4>
                        
                        <h5>F检验（固定效应 vs 混合OLS）</h5>
                        <p>检验是否应该使用固定效应模型而非混合OLS模型。</p>
                        <ul>
                            <li><strong>原假设</strong>：所有个体效应为0，应使用混合OLS</li>
                            <li><strong>备择假设</strong>：存在个体效应，应使用固定效应模型</li>
                            <li><strong>判断标准</strong>：p值<0.05拒绝原假设，选择固定效应模型</li>
                        </ul>
                        
                        <h5>Hausman检验（固定效应 vs 随机效应）</h5>
                        <p>检验应该使用固定效应还是随机效应模型。</p>
                        <ul>
                            <li><strong>原假设</strong>：个体效应与自变量不相关，应使用随机效应</li>
                            <li><strong>备择假设</strong>：个体效应与自变量相关，应使用固定效应</li>
                            <li><strong>sigmamore选项</strong>：解决协方差矩阵不正定问题，得到与Stata一致的结果</li>
                        </ul>
                        
                        <div class="tip-box">
                            <strong><i class="fa-light fa-circle-info me-2"></i>模型选择建议</strong>
                            <p>1. 先运行F检验，判断是否需要固定效应<br>
                            2. 如果需要固定效应，再运行Hausman检验选择FE或RE<br>
                            3. 如果Hausman检验遇到问题，勾选"使用sigmamore选项"</p>
                        </div>
                    </div>
                    
                    <!-- 导出结果 -->
                    <div id="export-guide" class="content-card fade-in-up">
                        <h3><i class="fa-light fa-download me-2"></i>导出结果指南</h3>
                        
                        <p>STATAU 支持将分析结果导出为多种格式，方便您在不同场景下使用。</p>
                        
                        <h4>支持的导出格式</h4>
                        
                        <table class="help-table">
                            <thead>
                                <tr>
                                    <th>格式</th>
                                    <th>扩展名</th>
                                    <th>适用场景</th>
                                    <th>特点</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Word</td>
                                    <td><code>.docx</code></td>
                                    <td>论文写作</td>
                                    <td>保留学术表格格式，可直接插入论文</td>
                                </tr>
                                <tr>
                                    <td>Excel</td>
                                    <td><code>.xlsx</code></td>
                                    <td>数据处理</td>
                                    <td>可进一步编辑和计算</td>
                                </tr>
                                <tr>
                                    <td>TXT</td>
                                    <td><code>.txt</code></td>
                                    <td>纯文本</td>
                                    <td>跨平台兼容，易于分享</td>
                                </tr>
                                <tr>
                                    <td>CSV</td>
                                    <td><code>.csv</code></td>
                                    <td>数据交换</td>
                                    <td>标准格式，可导入其他统计软件</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <h4>如何导出</h4>
                        
                        <ol>
                            <li>完成数据分析，生成结果表格</li>
                            <li>在结果表格上方会自动显示导出按钮</li>
                            <li>点击相应格式的按钮（Word、Excel、TXT、CSV）</li>
                            <li>浏览器会自动下载文件到默认下载目录</li>
                        </ol>
                        
                        <h4>文件命名规则</h4>
                        <p>导出的文件名格式：<code>表格标题_时间戳.扩展名</code></p>
                        <p>示例：<code>Regression_Results_20260128_143045.docx</code></p>
                        
                        <div class="feature-box">
                            <h5><i class="fa-light fa-star me-2"></i>导出功能特色</h5>
                            <p>• 纯前端实现，无需后端支持，导出速度快<br>
                            • 自动处理中文编码，确保中文正确显示<br>
                            • Word导出保留学术表格样式（Times New Roman字体）<br>
                            • Excel自动调整列宽，便于查看</p>
                        </div>
                        
                        <div class="tip-box warning">
                            <strong><i class="fa-light fa-triangle-exclamation me-2"></i>注意事项</strong>
                            <p>1. CSV和TXT文件使用UTF-8编码，用Excel打开CSV时选择UTF-8<br>
                            2. Word文件需要Office 2010+或WPS打开<br>
                            3. 导出按钮只在当前激活模块有结果时显示</p>
                        </div>
                    </div>
                    
                    <!-- 高级功能 -->
                    <div id="advanced-features" class="content-card fade-in-up">
                        <h3><i class="fa-light fa-gear me-2"></i>高级功能</h3>
                        
                        <h4>面板数据分析</h4>
                        
                        <p>面板数据（Panel Data）是同时包含横截面和时间序列维度的数据。STATAU 完整支持面板数据的固定效应、随机效应和混合效应模型。</p>
                        
                        <h5>配置面板数据</h5>
                        <ul>
                            <li><strong>个体ID（Entity）</strong>：标识不同个体的变量（如公司ID、个人ID）</li>
                            <li><strong>时间变量（Time）</strong>：标识时间的变量（如年份、季度）</li>
                            <li><strong>固定效应选项</strong>：
                                <ul>
                                    <li>仅个体固定效应：控制个体特征</li>
                                    <li>仅时间固定效应：控制时间趋势</li>
                                    <li>双向固定效应：同时控制个体和时间</li>
                                </ul>
                            </li>
                        </ul>
                        
                        <h4>标准误选项</h4>
                        
                        <p>标准误的选择对统计推断至关重要。STATAU 支持三种标准误类型：</p>
                        
                        <table class="help-table">
                            <thead>
                                <tr>
                                    <th>类型</th>
                                    <th>适用场景</th>
                                    <th>说明</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>普通标准误</td>
                                    <td>满足经典假设</td>
                                    <td>假设误差项同方差且无自相关</td>
                                </tr>
                                <tr>
                                    <td>稳健标准误</td>
                                    <td>存在异方差</td>
                                    <td>对异方差稳健，不需要同方差假设</td>
                                </tr>
                                <tr>
                                    <td>聚类标准误</td>
                                    <td>面板数据/分组数据</td>
                                    <td>允许组内观测相关，组间独立</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div class="tip-box">
                            <strong><i class="fa-light fa-lightbulb me-2"></i>使用建议</strong>
                            <p>• 横截面数据：建议使用稳健标准误<br>
                            • 面板数据：建议使用聚类标准误（按个体ID聚类）<br>
                            • 时间序列数据：考虑使用HAC标准误（当前版本暂不支持）</p>
                        </div>
                        
                        <h4>多模型对比</h4>
                        
                        <p>STATAU 支持在同一个表格中展示多个模型的结果，方便进行对比分析。</p>
                        
                        <h5>操作步骤</h5>
                        <ol>
                            <li>运行第一个模型，选择"新建表格"</li>
                            <li>运行第二个模型，选择"添加到当前表格"</li>
                            <li>重复步骤2，可以添加更多模型</li>
                            <li>所有模型会并排显示在同一个表格中</li>
                        </ol>
                        
                        <h5>表格定制</h5>
                        <ul>
                            <li><strong>表格标题</strong>：可以自定义表格标题</li>
                            <li><strong>小数位数</strong>：控制结果的精度（1-6位）</li>
                            <li><strong>显示选项</strong>：选择显示标准误或t值</li>
                            <li><strong>统计量选项</strong>：选择显示哪些模型统计量（R²、F统计量等）</li>
                        </ul>
                        
                        <h4>变量输入技巧</h4>
                        
                        <div class="feature-box">
                            <h5><i class="fa-light fa-wand-magic-sparkles me-2"></i>快速输入控制变量</h5>
                            <p>在"手动输入控制变量"文本框中，可以直接粘贴多个变量名（用空格或逗号分隔），比逐个勾选要快得多。<br><br>
                            示例：<code>age income education experience</code></p>
                        </div>
                    </div>
                    
                    <!-- 常见问题 -->
                    <div id="faq" class="content-card fade-in-up">
                        <h3><i class="fa-light fa-circle-question me-2"></i>常见问题解答</h3>
                        
                        <h4>数据上传相关</h4>
                        
                        <h5>Q: 上传文件后提示"文件格式不支持"？</h5>
                        <p><strong>A:</strong> 请确保文件格式为CSV、Excel（.xlsx/.xls）或Stata（.dta）。如果是Excel文件，确保数据在第一个工作表中。</p>
                        
                        <h5>Q: 上传的数据显示乱码怎么办？</h5>
                        <p><strong>A:</strong> 这通常是编码问题。建议：</p>
                        <ul>
                            <li>CSV文件使用UTF-8编码保存</li>
                            <li>变量名使用英文</li>
                            <li>避免在数据中使用特殊字符</li>
                        </ul>
                        
                        <h5>Q: 文件大小超过限制怎么办？</h5>
                        <p><strong>A:</strong> 当前限制为50MB。如果数据量过大，建议：</p>
                        <ul>
                            <li>删除不必要的变量</li>
                            <li>对数据进行抽样</li>
                            <li>分批次进行分析</li>
                        </ul>
                        
                        <h4>分析结果相关</h4>
                        
                        <h5>Q: 为什么我的回归结果与Stata不完全一致？</h5>
                        <p><strong>A:</strong> 可能的原因：</p>
                        <ul>
                            <li>标准误类型不同（检查是否使用了相同的标准误选项）</li>
                            <li>缺失值处理方式不同</li>
                            <li>Stata版本差异（建议使用Stata 14及以上版本的算法）</li>
                        </ul>
                        
                        <h5>Q: Hausman检验提示"协方差矩阵不正定"？</h5>
                        <p><strong>A:</strong> 这是常见问题。解决方案：</p>
                        <ul>
                            <li>勾选"使用sigmamore选项"</li>
                            <li>这会使用基于随机效应的统一方差估计</li>
                            <li>结果将与Stata的hausman检验一致</li>
                        </ul>
                        
                        <h5>Q: VIF值多少算存在共线性问题？</h5>
                        <p><strong>A:</strong> 一般判断标准：</p>
                        <ul>
                            <li>VIF < 5：无共线性问题</li>
                            <li>5 ≤ VIF < 10：存在一定共线性，需注意</li>
                            <li>VIF ≥ 10：严重共线性，建议删除相关变量</li>
                        </ul>
                        
                        <h4>导出功能相关</h4>
                        
                        <h5>Q: 导出的Word文件无法打开？</h5>
                        <p><strong>A:</strong> 请确保：</p>
                        <ul>
                            <li>使用Office 2010或更高版本</li>
                            <li>或使用WPS Office</li>
                            <li>文件大小不为0字节</li>
                        </ul>
                        
                        <h5>Q: CSV文件用Excel打开中文乱码？</h5>
                        <p><strong>A:</strong> 解决方法：</p>
                        <ol>
                            <li>用记事本打开CSV文件</li>
                            <li>另存为，编码选择"UTF-8"</li>
                            <li>或在Excel中选择"数据"-"从文本"导入，选择UTF-8编码</li>
                        </ol>
                        
                        <h4>账户相关</h4>
                        
                        <h5>Q: 收不到邮箱验证码？</h5>
                        <p><strong>A:</strong> 请检查：</p>
                        <ul>
                            <li>邮箱地址是否正确</li>
                            <li>查看垃圾邮件文件夹</li>
                            <li>等待1-2分钟后重试</li>
                            <li>确认邮件服务器配置正确</li>
                        </ul>
                        
                        <h5>Q: 忘记密码怎么办？</h5>
                        <p><strong>A:</strong> 当前版本暂不支持密码找回功能。请联系管理员重置密码。</p>
                        
                        <h4>其他问题</h4>
                        
                        <h5>Q: 游客模式和登录用户有什么区别？</h5>
                        <p><strong>A:</strong> 主要区别：</p>
                        <ul>
                            <li>游客模式：可以使用所有分析功能，但不保存历史记录</li>
                            <li>登录用户：分析结果会保存，可以随时查看历史记录</li>
                        </ul>
                        
                        <h5>Q: 数据会被保存吗？安全吗？</h5>
                        <p><strong>A:</strong> 数据安全说明：</p>
                        <ul>
                            <li>上传的数据仅用于即时计算</li>
                            <li>分析完成后可以选择清除数据</li>
                            <li>不会将您的数据用于其他用途</li>
                            <li>建议不要上传包含敏感信息的数据</li>
                        </ul>
                        
                        <div class="feature-box">
                            <h5><i class="fa-light fa-comments me-2"></i>还有其他问题？</h5>
                            <p>如果您的问题没有在这里找到答案，欢迎通过以下方式联系我们：<br>
                            • 查看项目GitHub仓库的Issues<br>
                            • 发送邮件至技术支持邮箱<br>
                            • 查阅详细的技术文档（README.md）</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<script>
// 侧边导航激活状态切换
document.addEventListener('DOMContentLoaded', function() {
    const navLinks = document.querySelectorAll('.sidebar-nav .list-group-item');
    
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            // 移除所有激活状态
            navLinks.forEach(l => l.classList.remove('active'));
            
            // 添加当前激活状态
            this.classList.add('active');
            
            // 平滑滚动到目标位置
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            
            if (targetElement) {
                const offsetTop = targetElement.offsetTop - 80;
                window.scrollTo({
                    top: offsetTop,
                    behavior: 'smooth'
                });
            }
        });
    });
    
    // 滚动时更新激活状态
    window.addEventListener('scroll', function() {
        const sections = document.querySelectorAll('.content-card');
        let currentSection = '';
        
        sections.forEach(section => {
            const sectionTop = section.offsetTop - 100;
            const sectionHeight = section.offsetHeight;
            
            if (window.pageYOffset >= sectionTop && window.pageYOffset < sectionTop + sectionHeight) {
                currentSection = '#' + section.getAttribute('id');
            }
        });
        
        if (currentSection) {
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === currentSection) {
                    link.classList.add('active');
                }
            });
        }
    });
});
</script>
{% endblock %}
